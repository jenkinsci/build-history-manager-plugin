properties(
    [
        buildDiscarder(BuildHistoryManager(
                [
                    [
                        actions: [DeleteArtifactsWithPattern(exclude: '**/*.log', include: '**')],
                        conditions: [BuildNumberRange(maxBuildNumber: Integer.parseInt(env.BUILD_NUMBER, 10) - 1, minBuildNumber: 0)]
                    ]
                ]
            )
        )
    ]
)

node {
        writeFile file: 'test.xml', text: 'empty'
        writeFile file: 'testLog.log', text: 'empty'
        writeFile file: 'testTxt.txt', text: 'empty'
        dir('testFolder'){
            writeFile file: 'test1.xml', text: 'empty'
            writeFile file: 'testLog1.log', text: 'empty'
            writeFile file: 'testTxt1.txt', text: 'empty'
        } 
        archiveArtifacts artifacts: '**', followSymlinks: false
}