final int buildNumber = Integer.parseInt(env.BUILD_NUMBER, 10)
properties(
    [
        buildDiscarder(BuildHistoryManager(
                [
                    [
                        actions: [DeleteArtifactsMatchingPatterns(excludePatterns: '**/*.log', includePatterns: '**')],
                        conditions: [BuildNumberRange(maxBuildNumber: buildNumber - 2, minBuildNumber: 0)]
                    ],
                    [
                        actions: [DeleteArtifactsMatchingPatterns(excludePatterns: '', includePatterns: '**')],
                        conditions: [BuildNumberRange(maxBuildNumber: buildNumber - 5, minBuildNumber: 0)]
                    ]
                ]
            )
        )
    ]
)

node {
        writeFile file: 'test.xml', text: 'empty'
        writeFile file: 'testLog.log', text: 'empty'
        writeFile file: 'testTxt.txt', text: 'empty'
        dir('testFolder'){
            writeFile file: 'test1.xml', text: 'empty'
            writeFile file: 'testLog1.log', text: 'empty'
            writeFile file: 'testTxt1.txt', text: 'empty'
        } 
        archiveArtifacts artifacts: '**', followSymlinks: false
}